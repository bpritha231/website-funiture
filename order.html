<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Order List</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Navbar (keep same look as other pages) -->
<div class="navbar" id="navbar">
  <div style="font-size:22px;font-weight:700; display: flex; align-items: center;">
    <img src="./images/logo.png" alt="Logo" style="width:70px; height:70px; margin-right:10px;">
    VIYAAN FURNITURES
  </div>
  <div style="margin-right: 90px;">
    <a href="home.html">Home</a>
    <a href="products.html">Products</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="order.html"  class="active1">Order list</a>

    <a href="products.html#cart" style="background:black;color:white;padding:6px 12px;border-radius:5px;">
      Cart (<span id="cart-count">0</span>)
    </a>
    <a href="products.html#buyNowSection" style="background:rgb(25, 221, 7);color:rgb(255, 255, 255);padding:6px 12px;border-radius:5px;">buy now</a>
  </div>
</div>

<div class="container">
  <h2>Your Orders</h2>
  <p class="subtitle">Orders saved on this browser</p>

  <div id="ordersContainer"></div>

  <div style="margin-top:20px;">
    <button class="btn" id="clearOrdersBtn">Clear All Orders</button>
  </div>
</div>

<script>
  function formatCurrency(n){ return '₹' + n; }

  function renderOrders(){
    const container = document.getElementById('ordersContainer');
    const orders = JSON.parse(localStorage.getItem('orders')) || [];
    document.getElementById('cart-count').innerText = 0;

    if(orders.length === 0){
      container.innerHTML = '<p>No orders yet.</p>';
      return;
    }

    container.innerHTML = '';
    orders.forEach((order, idx) => {
      const box = document.createElement('div');
      box.style.border = '1px solid #ddd';
      box.style.padding = '16px';
      box.style.marginBottom = '12px';
      box.style.borderRadius = '6px';
      let html = `<div style="display:flex; justify-content:space-between; align-items:center;">
                    <h3 style="margin:0;">Order #${idx+1} - ${order.orderDate || ''}</h3>
                    <div>
                      <button class="btn" onclick="deleteOrder(${idx})" style="background:#c0392b; color:white; padding:6px 10px; border-radius:4px; border:none;">Delete</button>
                    </div>
                  </div>`;

      // show customer details if present
      const cust = order.customer || {};
      if(Object.keys(cust).length){
        html += `<p style="margin:6px 0;"><strong>Customer:</strong> ${cust.name || ''} ${cust.phone ? ' | ' + cust.phone : ''}</p>`;
        html += `<p style="margin:6px 0;"><strong>City:</strong> ${cust.city || ''} ${cust.country ? ' | ' + cust.country : ''}</p>`;
        html += `<p style="margin:6px 0;"><strong>Payment:</strong> ${cust.payment || cust.paymentMode || ''}</p>`;
        html += `<p style="margin:6px 0;"><strong>Address:</strong> ${cust.address || order.address || ''}</p>`;
      } else {
        html += `<p><strong>Address:</strong> ${order.address || ''}</p>`;
      }

      if(order.deliveryDate) html += `<p><strong>Delivery:</strong> ${order.deliveryDate || ''}</p>`;

      html += '<ul style="list-style:none; padding:0; margin:0;">';
      (order.items || []).forEach(it => {
        const price = parseFloat((it.price || '').toString().replace('₹','')) || 0;
        html += `<li style="display:flex; align-items:center; gap:12px; margin:8px 0;">
                  <img src="${it.img || ''}" alt="${it.name||''}" style="width:60px; height:60px; object-fit:cover; border-radius:6px;">
                  <div>
                    <div style="font-weight:600;">${it.name || ''}</div>
                    <div>Qty: ${it.qty || 1} &nbsp; • &nbsp; ${formatCurrency(price * (it.qty || 1))}</div>
                  </div>
                 </li>`;
      });
      html += '</ul>';
      html += `<div style="font-weight:700; margin-top:8px;">Total: ${formatCurrency(order.total || 0)}</div>`;
      box.innerHTML = html;
      container.appendChild(box);
    });
  }

  // Delete single order by index
  function deleteOrder(index) {
    const orders = JSON.parse(localStorage.getItem('orders')) || [];
    if (index < 0 || index >= orders.length) return;
    if (!confirm('Delete this order?')) return;
    orders.splice(index, 1);
    localStorage.setItem('orders', JSON.stringify(orders));
    renderOrders();
  }

  document.getElementById('clearOrdersBtn').onclick = function(){
    if(confirm('Clear all saved orders?')) {
      localStorage.removeItem('orders');
      renderOrders();
    }
  };

  // initial render
  renderOrders();
</script>

<!-- Footer (keeps same look) -->
<footer style="background:#8B4513; color:white; padding:80px 50px; font-size:16px;">
  <div style="display:flex; justify-content:space-between; flex-wrap:wrap; gap:50px;">
    <div>
      <h3>Artisan Home</h3>
      <p>Creating beautiful, sustainable furniture that brings families together. Each piece is thoughtfully designed and expertly crafted to last generations.</p>
      <p>123 Craftsman Avenue, San Francisco, CA 94103<br>
      (555) 123-4567<br>
      hello@artisanhome.com</p>
    </div>

    <div>
      <h4>Quick Links</h4>
      <ul style="list-style:none; padding:0;">
        <li><a href="products.html" style="color: #ccc;">Products</a></li>
        <li><a href="about.html" style="color: #ccc;">About</a></li>
        <li><a href="contact.html" style="color: #ccc;">Contact</a></li>
      </ul>
    </div>
  </div>

  <hr style="border-color:rgba(255,255,255,0.3); margin:40px 0;">
  <p style="text-align:center;">© 2025 Artisan Home. All rights reserved. | Privacy Policy | Terms of Service</p>
</footer>

</body>
</html>
